{% extends 'base.html' %}
{% block title %}Подписки — Админ{% endblock %}
{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/profile.css') }}">
{% endblock %}
{% block content %}
<div class="container" style="max-width:1200px; margin:24px auto; padding:0 24px;">
  <div class="toolbar" style="display:flex; gap:8px; align-items:center; margin-bottom:12px;">
    <a href="javascript:history.back()" class="btn" aria-label="Назад">← Назад</a>
    <a href="{{ url_for('profile') }}" class="btn btn-accent">Профиль</a>
  </div>
  <h1>Подписки</h1>
  <div class="card">
    <div class="card-head"><h2>Список подписок</h2></div>
    <div class="card-body">
      <div class="table">
        <div class="table-row head">
          <div>User ID</div>
          <div>Status</div>
          <div>Price</div>
          <div>Period End</div>
          <div>Customer</div>
        </div>
        {% for s in subs %}
        <div class="table-row">
          <div>{{ s.user_id }}</div>
          <div>{{ s.status or '—' }}</div>
          <div>{{ s.stripe_price_id or '—' }}</div>
          <div>{% if s.current_period_end %}{{ s.current_period_end.strftime('%d.%m.%Y') }}{% else %}—{% endif %}</div>
          <div>{{ s.stripe_customer_id or '—' }}</div>
        </div>
        {% else %}
        <div class="table-row"><div class="muted">Нет подписок.</div></div>
        {% endfor %}
      </div>
    </div>
  </div>
</div>
{% endblock %}
