ЗАДАЧА

Разделить текущую страницу профиля на две независимые вкладки/маршруты:

Главная (read-only) — только просмотр данных пользователя. Никаких инпутов, форм и сохранений.

Профиль — страница редактирования (фото, ФИО, группа/уровень — если разрешено, пароль и т. д.).

Сейчас «Главная» и «Профиль» дублируют одно и то же. Нужно развести ответственность и интерфейсы.

ТЕХСТЕК

Flask + Jinja2 + Flask-Login + WTForms + Flask-Babel. Стили и тёмная тема оставляем как на скрине (WCA).

ТРЕБОВАНИЯ ПО РОУТАМ

Создать два отдельных маршрута:

/profile/overview — Главная (read-only)

/profile/edit — Профиль (редактирование)

Старый /profile/ должен редиректить на /profile/overview.

Оба маршрута доступны только авторизованным пользователям.

Если пользователь заходит на /profile/edit, но не имеет прав менять отдельные поля (например, группа/уровень), показываем поле в режиме disabled/метку «Только админ» и не отдаём форму на сохранение этих полей.

НАВИГАЦИЯ/UX

В левой колонке (как на скрине) оставить вертикальное меню:

«Главная» (активна на /profile/overview)

«Профиль» (активна на /profile/edit)

«Абонемент»

«Документы»

Активное состояние вкладки подсвечивать стилями проекта.

В «Главной» вместо кнопок «Сохранить/Изменить» показывать одну ссылку-кнопку «Редактировать профиль», ведущую на /profile/edit.

СОДЕРЖИМОЕ «ГЛАВНАЯ (READ-ONLY)»

Отображаем единым аккуратным блоком все ключевые данные пользователя (без инпутов):

Аватар/инициалы (кружок с буквами, если нет фото).

Имя (ФИО), ник (если есть), e-mail (частично маскируем при необходимости).

Статус подписки/абонемента: тип, дата начала/окончания, статус (активен/истёк/заморожен).

Группа/уровень (с подписью «—», если не задано).

Статистика: количество посещений, дата последнего визита/последнего входа.

Короткий блок «Документы»: список названий с датой загрузки и кнопкой «Открыть» (без возможности удалять/менять отсюда).

Язык интерфейса/локаль.

Системные метки: дата регистрации, ID пользователя (только если нужно).

В правом верхнем углу блока — «Редактировать профиль» (ссылка на /profile/edit).
Важно: никаких полей ввода и кнопок «Сохранить» на этой странице.

СОДЕРЖИМОЕ «ПРОФИЛЬ (РЕДАКТИРОВАНИЕ)»

Блок «Управление аккаунтом»:

Загрузка/замена фото (кнопка «Загрузить фото»).

Изменение пароля: текущий/новый/подтверждение (валидация, сообщения об ошибках/успехе).

Блок «Личные данные»:

ФИО — редактируемое поле.

Группа/уровень:

Если роль admin — редактируемые поля (селекты).

Если роль user — только просмотр/disabled + подпись «Назначается тренером/админом».

Кнопка «Сохранить изменения».

После успешного сохранения — флеш-сообщение и редирект остаётся на /profile/edit.

Отдельных destructive-действий (удалить аккаунт) не добавлять в этой задаче.

ДОСТУПЫ И БЕЗОПАСНОСТЬ

Только владелец профиля или админ может видеть/редактировать /profile/edit.

Поля с ограничениями (группа/уровень) не только дизейблим в UI, но и проверяем на сервере (role-check), чтобы нельзя было отправить изменённые данные через запрос.

CSRF защита для всех форм.

Загрузка файла аватара — ограничить типы и размер, сохранять в предусмотренную папку/облако, записывать путь в БД.

I18N (BABEL)

Все новые строки обернуть в _()/gettext.

Ключи: "Profile", "Overview", "Edit profile", "Subscription", "Documents", "Level", "Group", "No data", "Read only", "Save changes", "Password changed successfully", "Invalid current password", и т. д.

Следить за тем, чтобы спецсимволы (напр. «Уровень») корректно отображались в RU/EN/ET.

ШАБЛОНЫ/ФАЙЛЫ (БЕЗ КОДА, ТОЛЬКО СТРУКТУРА)

Шаблон profile_overview.html — чистый read-only UI.

Шаблон profile_edit.html — форма редактирования.

Общие частичные:

_profile_nav.html — левое меню разделов.

_profile_header.html — шапка карточки пользователя (аватар + имя + статусы).

Логика «активной вкладки» — через контекст шаблона/переменную.

ВАЛИДАЦИЯ/ОШИБКИ

Понятные сообщения об ошибках ввода и загрузки файлов.

При ошибке валидации на /profile/edit остаёмся на странице, подсвечиваем поля, не сбрасываем остальную форму.

На «Главной» ошибок быть не должно — только вывод данных.

ПРОИЗВОДИТЕЛЬНОСТЬ/UX

Данные для «Главной» подгружать одним запросом (user + membership + документы).

Не грузить тяжёлые превью документов — только имена/даты/ссылки.

Аватар — использовать существующий размер/кроп, без генерации лишних размеров.

ПРИЁМОЧНЫЕ КРИТЕРИИ

Переход /profile/ ⇒ редирект на /profile/overview.

На /profile/overview нет ни одного редактируемого инпута и нет кнопок «Сохранить». Есть только ссылка «Редактировать профиль».

На /profile/edit можно менять фото, ФИО, пароль; «группа/уровень» доступны к изменению только админу.

Все тексты локализуемы (RU/EN/ET).

Роли соблюдаются как в UI, так и на бекенде. Попытка отправить запрещённые изменения отклоняется.

Тёмная тема и визуальный стиль соответствуют текущему дизайну WCA.

Никаких регрессий в разделах «Абонемент» и «Документы».